<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css">
    <style>
      body{
        margin-left: 30px;
      }
      .warning {
        border: 2px solid #f39389;
        border-radius: 2px;
        padding: 10px;
        position: absolute;
        background-color: #fbd8d4;
        color: #3b3c40;
    }
    </style>
  </head>
  <body>
    <h1>CREATION D'UN JUDOKA</h1>
    <p>Remplissez tous les champs ci-dessous</p>
    <form id="inputForm">
      <div class="form-group" id="div-name">
        <label for="name">Nom(s) et Prénom(s)</label>
        <input type="text" id="name" name="nameJudoka">
      </div>
      <br/>
      <div class="form-group" id="div-birthdate">
        <label for="birthdate">Date de Naissance</label>
        <input type="date" id="birthdate" name="birthdate">
      </div>
      <br/>
      <div class="form-group" id="div-nat">
        <label for="nationality">Nationalité</label>
        <input type="text" id="nationality" name="nationality">
        <span class="gray">Veuillez entrer les nationalités au format abbréviation. Exemple: CMR pour Camerounaise</span>
      </div>
      <br/>
      <div class="form-group">
        <label for="image">Image de profil</label>
        <input type="text" id="image" name="image">
        <span class="gray">Veuillez coller le lien du profil dans le champs ci-dessus</span>
      </div>
      <button class="action" onclick="validateFields(this.parentNode)">Créer</button>
      <button>Annuler</button>
    </form>
    <script>
      function validateFields(input){
        console.log(input.name.value.length)
        if (input.name.value.length === 0){
          const divName = document.getElementById('div-name');
          const div = document.createElement('div');
          div.className = "warning";
          div.innerHTML = "Veuillez entrer un nom";
          divName.appendChild(div);
          setTimeout(()=>{
            div.parentNode.removeChild(div);
          }, 2000);
        }else if (input.birthdate.value.length === 0){
          const divBD = document.getElementById('div-birthdate');
          const div = document.createElement('div');
          div.className = "warning";
          div.innerHTML = "Veuillez entrer la date de naissance";
          divBD.appendChild(div);
          setTimeout(()=>{
            div.parentNode.removeChild(div);
          }, 2000);
        }else if (input.nationality.value.length === 0){
          const divNat = document.getElementById('div-nat');
          const div = document.createElement('div');
          div.className = "warning";
          div.innerHTML = "Veuillez entrer la nationalité";
          divNat.appendChild(div);
          setTimeout(()=>{
            div.parentNode.removeChild(div);
          }, 2000);
        }else
          google.script.run.addJudoka(input);
      }
    </script>
  </body>
</html>
